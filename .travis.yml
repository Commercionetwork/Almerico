language: node_js

node_js:
  - "12.5.0"

services:
  - docker
  
install:
  - npm install

script: 
  - npm test

after_success:
  - docker build -t $DOCKER_IMAGE .

deploy:
  provider: script
  script: docker push $DOCKER_IMAGE
  on:
    branch: development